Homework 2
================
Allison Randy-Cofie
2022-09-29

``` r
library(tidyverse)
library(readxl)
```

### Problem 1

``` r
nyc = read_csv("./nyc_transit.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name,station_latitude,station_longitude, route1:route11,entry,vending,entrance_type,ada) 
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Problem 2

Load the datasets

``` r
mr_df = read_excel("./Trash-Wheel-Collection-Totals-7-2020-2.xlsx","Mr. Trash Wheel","A2:N534")%>%
 janitor::clean_names() %>% 
  drop_na(year) %>% 
  mutate(sports_balls=as.integer(sports_balls)) %>% 
   mutate(trash_wheel = "mr")
```

``` r
prof_df = read_excel("./Trash-Wheel-Collection-Totals-7-2020-2.xlsx","Professor Trash Wheel","A2:N116")%>%
 janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls=as.integer(sports_balls))%>% 
   mutate(trash_wheel = "prof")
```

Combining the data

``` r
trash_df=bind_rows(mr_df,prof_df)
```

Write a paragraph about these data; you are encouraged to use inline R.
Be sure to note the number of observations in the resulting dataset, and
give examples of key variables. For available data, what was the total
weight of trash collected by Professor Trash Wheel? What was the total
number of sports balls collected by Mr. Trash Wheel in 2020?

In the Mr. Trash Wheel dataset there are 453 and 15

### Problem 3

``` r
pols_df= read_csv("./fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year","month","day")) %>% 
  mutate(month = month.abb[as.numeric(month)],
  president = recode(prez_dem, `1` = "dem", `0` = "gop")) %>% 
  select(-c(prez_gop, prez_dem, day)) 
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df = read_csv("./fivethirtyeight_datasets/snp.csv") 
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
dates <- snp_df$date %>% as.Date(., "%m/%d/%y")
dates <- as.Date(ifelse(dates > Sys.Date(), format(dates, "19%y-%m-%d"), format(dates)))
snp_df$date = dates

snp_df = snp_df %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("year","month","day")) %>% 
  mutate(month = month.abb[as.numeric(month)]) %>% 
  arrange(year, month) %>% 
  relocate(year, month)
```

``` r
umemp_df<- read_csv("./fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>%
   pivot_longer(
    jan:dec, 
    names_to = "month",
    values_to = "unemp_rate"
  ) %>% 
  arrange(year, month) %>% 
  relocate(year, month) %>% 
  mutate(year = as.character(year))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Putting them together

``` r
final_df = 
  pols_df %>% 
  left_join(snp_df, by = c("year","month")) %>% 
  left_join(umemp_df, by = c("year", "month"))
```
